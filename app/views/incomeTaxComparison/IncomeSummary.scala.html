@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.tai.viewModels.TaxCodeComparisonViewModel
@import uk.gov.hmrc.tai.config.ApplicationConfig
@import uk.gov.hmrc.urls.Link
@import uk.gov.hmrc.tai.viewModels.IncomeSourceComparisonViewModel
@import uk.gov.hmrc.time.TaxYearResolver

@(incomeSourceViewModel:IncomeSourceComparisonViewModel)(implicit messages: Messages)

@{
    (incomeSourceViewModel.employmentIncomeSourceDetail.size > 0, incomeSourceViewModel.pensionIncomeSourceDetail.size > 0) match {
        case(true,true) => {
            <h2 id="incomeSummaryHeading"
                class="heading-large">{messages("tai.incomeTaxComparison.incomeTax.subHeading.incomeFromEmploymentAndPrivatePensions")}</h2>
        }
        case(true,false) => {
            <h2 id="incomeSummaryHeading"
                class="heading-large">{messages("tai.incomeTaxComparison.incomeTax.subHeading.incomeFromEmployment")}</h2>
        }
        case(false,true) => {
            <h2 id="incomeSummaryHeading"
                class="heading-large">{messages("tai.incomeTaxComparison.incomeTax.subHeading.incomeFromPrivatePensions")}</h2>
        }
        case _ =>
    }
}

@if(incomeSourceViewModel.employmentIncomeSourceDetail.size > 0 || incomeSourceViewModel.pensionIncomeSourceDetail.size > 0){
    <table class="table--font-reset flush--bottom" id="incomeSummaryComparisonTable">

        <thead id="incomeSummeryComparisonTableHeader">
        <tr class="text--right">
            <th></th>
            <th id="taxCodeComparisonTableHeaderCol1" scope="col" class="text--right">
                @messages("tai.CurrentTaxYearEnds",incomeSourceViewModel.htmlNonBroken(TaxYearResolver.endOfCurrentTaxYear.toString("d MMMM")))
            </th>
            <th id="taxCodeComparisonTableTableHeaderCol2" scope="col" class="text--right">
                @messages("tai.NextTaxYearFrom",incomeSourceViewModel.htmlNonBroken(TaxYearResolver.startOfNextTaxYear.toString("d MMMM YYYY")))
            </th>
        </tr>
        </thead>

        <tbody id="incomeSummaryComparisonTableBody">
            @for(employmentIncomeSourceDetail <- incomeSourceViewModel.employmentIncomeSourceDetail) {
                <tr>
                    <td>@employmentIncomeSourceDetail.name</td>
                    <td class="text--right">@employmentIncomeSourceDetail.amountCY</td>
                    <td class="text--right">@employmentIncomeSourceDetail.amountCYPlusOne</td>
                </tr>
            }

            @for(pensionIncomeSourceDetail <- incomeSourceViewModel.pensionIncomeSourceDetail) {
            <tr>
                <td>@pensionIncomeSourceDetail.name</td>
                <td class="text--right">@pensionIncomeSourceDetail.amountCY</td>
                <td class="text--right">@pensionIncomeSourceDetail.amountCYPlusOne</td>
            </tr>
            }
        </tbody>

    </table>
}