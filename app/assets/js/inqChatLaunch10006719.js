if(!window.v3Lander&&-1==navigator.userAgent.indexOf("Opera")&&-1==navigator.userAgent.indexOf("MSIE 6")&&(-1==navigator.userAgent.indexOf("MSIE 7")||-1!=navigator.userAgent.indexOf("Trident")||-1!=navigator.userAgent.toLowerCase().indexOf("media center"))){"object"!=typeof window.v3LanderConfig&&(window.v3LanderConfig={});var isSameOriginSafe=!1;try{var elm=window.parent.v3LanderConfig;isSameOriginSafe=!0}catch(e){isSameOriginSafe=!1}function getHostedFileUrl(){var e="/nuance/hmrc-uk-nuance.html";if(isSameOriginSafe)if(window.parent.v3LanderConfig&&window.parent.v3LanderConfig.hostedFileURL)e=window.parent.v3LanderConfig.hostedFileURL;else try{window.parent.opener&&window.parent.opener.v3LanderConfig&&window.parent.opener.v3LanderConfig.hostedFileURL&&(e=window.parent.opener.v3LanderConfig.hostedFileURL)}catch(e){}return window.v3LanderConfig.hostedFileURL||e}function getParentV3Config(){try{var e=window.parent.opener&&window.parent.opener.v3LanderConfig}catch(e){}if(isSameOriginSafe&&(window.parent.v3LanderConfig||e))return e||window.parent.v3LanderConfig}if(window.v3Lander={FRAME_ID:"inqChatStage",codeVersion:"1556067942247",v3Frame:!1,domState:"defer-failed",domReady:!1,secureProtocol:function(e){return e.replace(/^HTTPS?:/i,"https:")},hostToPath:{},hostedFileURL:getHostedFileUrl(),isAtHostedFileURL:!1,log:function(e){"undefined"!=typeof console&&console.log&&console.log(e)},FMProxy:{fcns:{},addFcn:function(name,fcnStr){var obj=null;try{obj=eval("({'"+name+"':"+fcnStr+"})")}catch(e){throw"function eval failed. err="+e.toString()}this.fcns[name]=obj[name]},getFcn:function(e){return this.fcns[e]},removeFcn:function(e){return!!this.fcns[e]&&(delete this.fcns[e],!0)},getHelperFcn:function(e){var n=[];"string"==typeof e&&(n=e.split("."));for(var t=window,o=0;o<n.length;o++){var i=n[o];if(0!=o||"window"!=i){if("object"!=typeof t)throw"Helper function not found by FcnProxy: "+e;t=t[i]}}if("function"!=typeof t)throw"Helper function not a function in FcnProxy: "+e;return t}},_getHostedFileURL:function(e){return e||(e=window.location.host),e=e.toUpperCase(),v3Lander.hostToPath&&v3Lander.hostToPath[e]?v3Lander.hostToPath[e]:v3Lander.hostedFileURL},_setHostedFileURL:function(e){e||(e=window.location.host),e=e.toUpperCase(),v3Lander.hostToPath&&v3Lander.hostToPath[e]&&(v3Lander.hostedFileURL=v3Lander.hostToPath[e])},showLoader:function(){var e=document.createElement("div");e.id="tc-chat-loader",e.innerHTML='<p style="font-family: Arial,sans-serif;font-size: 42px;width: 100px;margin: 0 auto;margin-top: 25%;">Loading...</p>',document.body.appendChild(e)},getHostedFileURL:function(e){var n=this._getHostedFileURL(e);return 0!=n.indexOf("//")&&(n="//"+e+n),n=window.location.protocol+n},establishHostedFileURL:function(){try{var e=window.parent.opener&&window.parent.opener.v3LanderConfig}catch(e){}if(window.v3LanderConfig.hostToPath||isSameOriginSafe&&(window.parent.v3LanderConfig&&window.parent.v3LanderConfig.hostToPath||e&&e.hostToPath))for(var n=0,t=window.v3LanderConfig.hostToPath||window.parent.v3LanderConfig.hostToPath||e&&e.hostToPath;n<t.length;n++)t[n].domain&&t[n].hostedFileDirectory&&(v3Lander.hostToPath[t[n].domain.toUpperCase()]=t[n].hostedFileDirectory+v3Lander.hostedFileURL);this._setHostedFileURL()},assignDomain:function(){if(this.isAtHostedFileURL)for(var e=document.domain.split("."),n=0;n<e.length;n++)try{var t=null;if(""==window.location.search)t=window.opener;else if(0==window.location.search.indexOf("?IFRAME")||"?IEXF"==window.location.search)t=window.parent;else if("?BLNK"==window.location.search)t=window.parent;else{if("?XHR"!=window.location.search)return;t=window.parent.parent}if(document.domain==t.document.domain)break;e.shift(),e.length>1&&(document.domain=e.join("."))}catch(n){e.shift(),e.length>1&&(document.domain=e.join("."))}},embeddedHostedFile:null,embeddedDiv:null,c2cQueryData:null,registerDivRetry:0,resizeAnscestorIframe:function(){var e=name.split("||"),n=e[1],t=e[2],o=e[3],i=parent.parent.document.getElementsByName(n);if(i.length>0)try{i[0].style.cssText+=";width: "+t+"px;height: "+o+"px;display: block;overflow: hidden;overflow-x: hidden;overflow-y: hidden;border-style: hidden;border-style: none;border-width: 0px;"}catch(e){}},registerDiv:function(e){e&&(v3Lander.registerDivRetry=e);try{if(null==top.Inq)throw new Error("Inq not ready");if(null==top.Inq.fireCustomEvent)throw new Error("fireCustomEvent not ready");top.Inq.fireCustomEvent("IframeC2C",{div:v3Lander.embeddedDiv,queryData:v3Lander.c2cQueryData})}catch(e){--v3Lander.registerDivRetry>0&&window.setTimeout(v3Lander.registerDiv,500)}},resizeIframe:function(e,n){var t="RESIZE||"+(window.name?window.name.replace(/\n|<.*?>/g,"").replace(/\"/g,"\\'"):window.name)+"||"+e+"||"+n,o=document.createElement("div");o.innerHTML='<iframe id="inqChatStage" name="'+t+'" src="'+this.embeddedHostedFile+'?RSC2C" style="z-index:9999999;overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;border-style: none;border-width: 0px;display: none;" scrolling="NO" frameborder=0></iframe>';var i=o.firstChild;document.body.appendChild(i)},setSource:function(e,n){v3Lander.embeddedHostedFile=v3Lander.getHostedFileURL(n),v3Lander.embeddedDiv.innerHTML="";var t=new Image;for(var o in t.onload=function(e){return v3Lander.resizeIframe(this.width,this.height),!1},e)t.setAttribute(o,e[o]);if(t.onclick){try{t.style.cursor?t.style.cursor="pointer":t.style.cssText+=";cursor: pointer;cursor: hand;"}catch(e){}if(0!=(""+t.onclick).indexOf("function")){var i=t.onclick;t.onclick=new Function(i)}}v3Lander.embeddedDiv.appendChild(t)},fixV3IFrames:function(e){var n=e.getElementsByTagName("IFRAME");e.style.cssText="overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;border-style: none;border-width: 0px;";for(var t=0,o=n.length;t<o;t++)inqFrame=n[t],inqFrame.allowTransparency="true",inqFrame.border="0",inqFrame.frameBorder="no",inqFrame.frameSpacing=0,inqFrame.marginWidth=0,inqFrame.style.cssText="z-index:9999999;overflow:hidden;position:absolute;left:0px;top:0px;width:1px;height:1px;border-style: none;border-width: 0px;BACKGROUND-COLOR: Transparent;"},initV3Frame:function(){window.frameElement?window.clientwin=window.parent:window.opener&&(window.clientwin=window.opener),window.clientwin&&(window.clientwin.inqFrame=window),window.inqFrame=window,window.inqFrame!=window.parent&&(window.name=opener?"_inqPersistentChat":"inqV3"),window.cWinLanderConfig=getParentV3Config(),this.insertLandingTag()},reload:function(){this.domReady=!1,setTimeout(function(){v3Lander._reload()},50)},_reload:function(){var e=document.getElementById("inqChatStage"),n=document.getElementById("inqDivResizeCorner"),t=document.getElementById("inqTitleBar");e&&document.body.removeChild(e),n&&document.body.removeChild(n),t&&document.body.removeChild(t),window.inqFrame=null,window.Inq=void 0,this.start()},createV3Frame:function(e){if(!top.document.getElementById(v3Lander.FRAME_ID)){e||(e=window);var n=e.document,t=n.createElement("div"),o=""==n.location.port?"":":"+n.location.port,i=0==v3Lander.hostedFileURL.indexOf("/")?n.location.protocol+"//"+n.location.hostname+o+v3Lander.hostedFileURL+"?IFRAME"+(window.v3LanderConfig.iframeSrcParams||""):v3Lander.hostedFileURL;if(0==i.indexOf("http")){if("undefined"!=typeof CEAPI_POST_CHAT_SURVEY_DATA&&null!=CEAPI_POST_CHAT_SURVEY_DATA&&(i=n.location+"?IFRAME&hostedFileURL=true&siteID=10006719&vanityDomain="+v3Lander.secureProtocol(window.v3LanderConfig.vanityDomain||"https://hmrc-uk.digital.nuance.com")),top!=parent){var a=Math.round(1e12*Math.random()).toString(36);i+=-1==i.indexOf("?")?"?":"&",i+="rand="+a}t.id=v3Lander.FRAME_ID,t.style.cssText="z-index:9999999;overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;border-style: none;border-width: 0px;",i=v3Lander.encodeURLIfNotEncoded(i),t.innerHTML='<iframe id="inqChatStage" title="Chat Window" name="10006719" src="'+i+'" style="z-index:9999999;overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;border-style: none;border-width: 0px;display: none;" scrolling="NO" frameborder=0></iframe><div id="inqTitleBar" style="border-width: 0px; position: absolute; z-index: 9999999; left: 0px; top: 0px; cursor: move; height: 55px; width: 410px; display: none;"></div><div id="inqResizeBox" style="border-width: 0px; position: absolute; z-index: 9999999; left: 0px; top: 0px; display:none; height: 0px; width: 0px;"><div id="inqDivResizeCorner" style="border-width: 0px; position: absolute; z-index: 9999999; left: 424px; top: 284px; cursor: se-resize; height: 16px; width: 16px; display: none;"></div>';var r=n.body;if(r){var d=t.getElementsByTagName("IFRAME");0;for(var s=d.length-1;s>-1;--s)r.appendChild(d[s]);c()}v3Lander.fixV3IFrames(t)}}function c(){for(var e=t.getElementsByTagName("DIV"),n=e.length-1;n>-1;--n)r.appendChild(e[n])}},loadScript:function(e,n,t){var o=document.getElementsByTagName("BODY");if(o&&o[0]){var i=document.createElement("SCRIPT");try{window.parent.opener&&window.parent.opener.v3LanderConfig}catch(e){}i.src=n?v3Lander.secureProtocol(window.v3LanderConfig.vanityDomain||"https://media-uk1.digital.nuance.com")+e:v3Lander.secureProtocol(window.v3LanderConfig.vanityDomain||"https://hmrc-uk.digital.nuance.com")+e,i.type="text/javascript",i.charset="utf-8",i.language="javascript",o[0].appendChild(i)}},inqSiteDataFun:null,inqRulesEngineFun:null,mbusToLoad:[],page:null,cgIDs:null,isBupMode:!1,isRplMode:!0,loadedMbuRuleDataFuns:[],jsonAPIData:null,jsonMbuData:null,requestPage:function(){this.resolvePage()},getPage:function(){return this.page},getContentGroupIDs:function(){return this.cgIDs},resolvePage:function(){var e="/tagserver/launch/resolvePage?siteID=10006719&url="+encodeURIComponent(document.URL)+"&codeVersion="+encodeURIComponent(v3Lander.codeVersion),n=null;window.inqSiteID?n=window.inqSiteID:window.parent&&window.parent.inqSiteID&&(n=window.parent.inqSiteID),n&&(e+="&overridePageId="+encodeURIComponent(n)),this.loadScript(e)},reInitChatData:null,applyPage:function(e){var n=function(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return!0;return!1};this.isBupMode&&e.bUnits&&(this.mbusToLoad=function(e){for(var t=[],o=0;o<e.length;o++)n(t,e[o])||t.push(e[o]);return t}(e.bUnits)),this.isRplMode&&e.page&&(this.page=e.page),this.isRplMode&&e.cgIDs&&(this.cgIDs=e.cgIDs),this.reInitChatData?(window.Inq.reinitChatV3Callback(this.reInitChatData.pageID,this.reInitChatData.data),this.reInitChatData=null):this.createV3Frame()},initSiteDefaultData:function(e,n,t){v3Lander.landingData=t,v3Lander.inqSiteDataFun=e,v3Lander.inqRulesEngineFun=n,v3Lander.isBupMode&&0!=parent.v3Lander.mbusToLoad.length?v3Lander.loadMbuData():v3Lander.loadTcFramework()},loadTcFramework:function(){v3Lander.loadScript(v3Lander.generatePath("tcFramework.min.js"),!0,!0)},generatePath:function(e){return(window.v3LanderConfig.vanityDomain?"/chatskins":"/media")+"/launch/"+e+"?codeVersion="+encodeURIComponent(v3Lander.codeVersion)},loadMbuData:function(){for(var e=0;e<parent.v3Lander.mbusToLoad.length;e++)this.loadMbuDataForBU(parent.v3Lander.mbusToLoad[e])},buDataCallbackFcn:null,loadMbuDataForBU:function(e,n){n&&(this.buDataCallbackFcn=n),v3Lander.loadScript("/chatskins/launch/site_10006719_bu_"+e+".js?codeVersion="+encodeURIComponent(v3Lander.codeVersion),!1,!0)},applyMbuRuleData:function(e){this.buDataCallbackFcn?(this.buDataCallbackFcn(e),this.buDataCallbackFcn=null):(v3Lander.loadedMbuRuleDataFuns[v3Lander.loadedMbuRuleDataFuns.length]=e,v3Lander.loadedMbuRuleDataFuns.length==parent.v3Lander.mbusToLoad.length&&v3Lander.loadTcFramework())},insertLandingTag:function(){v3Lander.loadScript(v3Lander.generatePath("site_10006719_default.js"),!0,!0)},insertPostToServerTag:function(){v3Lander.loadScript("/tagserver/postToServer.min.js?codeVersion="+encodeURIComponent(this.codeVersion),!1,!0)},parseC2CQueryString:function(){var e=window.location.href.indexOf("?C2C"),n=window.location.href.substring(e+4);if(n.length>1){for(var t="{",o=n.substring(1).split("&"),i=0;i<o.length;i++){var a=o[i].split("=");(a.length>=1||a.length<=2)&&(t+=(0==i?"":", ")+a[0]+": "+(2==a.length?'"'+unescape(a[1])+'"':'""'))}t+="}",v3Lander.c2cQueryData=t}},renderC2CDiv:function(){document.body.style.cssText="border-style: none; border-width: 0px; margin: 0px; padding: 0px;overflow: hidden;overflow-x: hidden;overflow-y: hidden;";var e=document.createElement("DIV");e.id=window.name,document.body.appendChild(e),v3Lander.embeddedDiv=e,e.setSource=v3Lander.setSource},setDomReadyTimeout:function(e){setTimeout(function(){v3Lander.onDomReady()},e||0)},onDomReady:function(){if(!v3Lander.domReady)if(v3Lander.domReady=!0,-1==window.location.href.indexOf("?C2C")){try{if(window!=window.parent&&!v3Lander.isAtHostedFileURL&&window.document.domain==window.parent.document.domain)return}catch(e){}this.v3Frame?this.initV3Frame():this.isBupMode||this.isRplMode?this.requestPage():this.createV3Frame()}else try{v3Lander.renderC2CDiv(),v3Lander.parseC2CQueryString(),v3Lander.registerDiv(200)}catch(e){}},injectIntoParent:function(){function e(){t.v3Lander=window.v3Lander,n.createV3Frame(t)}var n=this,t=top.top,o=t.document;o.readyState&&("complete"===o.readyState||"loaded"===o.readyState?e():window.addEventListener?window.addEventListener("load",e,!0):window.attachEvent&&window.attachEvent("onload",e))},testReady:function(){if("undefined"!=typeof jQuery&&jQuery.isReady)v3Lander.setDomReadyTimeout(1);else if(void 0===document.readyState)document.addEventListener&&(document.addEventListener("load",v3Lander.setDomReadyTimeout,!1),document.addEventListener("DOMContentLoaded",v3Lander.setDomReadyTimeout,!1)),v3Lander.setDomReadyTimeout(100);else{var e=navigator.userAgent.match(/Trident\/(\d+)/),n=e&&2==e.length&&parseInt(e[1])>=6;if("complete"==document.readyState&&n)v3Lander.setDomReadyTimeout();else if(n||!document.all||window.opera)(document.addEventListener||n&&document.attachEvent)&&(/loaded|complete/.test(document.readyState)?v3Lander.setDomReadyTimeout():setTimeout(arguments.callee,100));else{try{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("id","v3ContentLoadTag"),t.setAttribute("defer","defer"),document.body.appendChild(t)}catch(e){this.log(e)}var o=document.getElementById("v3ContentLoadTag");o?o.onreadystatechange=function(){v3Lander.domState=this.readyState,"complete"==this.readyState&&v3Lander.setDomReadyTimeout(100)}:this.uponError()}}},uponError:function(){"complete"==document.readyState?v3Lander.setDomReadyTimeout(1):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),v3Lander.setDomReadyTimeout(1))})},removeNode:function(e){try{var n=document.getElementById(e),t=null;if(n&&(t=parent.parent.tempID),t){(t=t.parentNode).parentNode;var o=parent.parent;if(null==o.Inq)return;null==o.Inq.removeProxyNode&&(o.Inq.removeProxyNode=new o.Function("id","var node=document.getElementById(id);\ntry{\nif(!!node) {\nvar p=node.parentNode;\np.removeChild(node);\nnode=p;\nif(!!node) {\np=node.parentNode;\np.removeChild(node);\n}\n}\n}catch(e){}\n")),o.setTimeout('Inq.removeProxyNode("'+e+'")',100)}}catch(e){}},removeNodeXF:function(e){try{var n=parent.parent.document.getElementById(e);if(n){var t=(n=n.parentNode).parentNode;if(t)try{t.removeChild(n)}catch(e){}}}catch(e){}},wrapWithTryCatch:function(e){return"try {\n"+e+"\n} catch(e){Inq.log('ERROR:' + e.message);};"},xframeToIjsf:function(){var e=name.split("||"),n=decodeURIComponent(e[3]);window.parent.parent.parent.document.getElementById("inqChatStage").contentWindow.setTimeout(v3Lander.wrapWithTryCatch(n),1)},encodeURLIfNotEncoded:function(e){if(!e)return e;try{if(decodeURI(e).length===e.length)return encodeURI(e)}catch(e){}return e},start:function(){try{this.assignDomain(),v3Lander.v3Frame=window.frameElement&&"inqChatStage"==window.frameElement.id}catch(e){v3Lander.v3Frame=!1}v3Lander.testReady()}},v3Lander.hostToPath["WWW.STAGING.TAX.SERVICE.GOV.UK"]="/check-income-tax/assets/nuance/hmrc-uk-nuance.html",v3Lander.hostToPath["WWW.QA.TAX.SERVICE.GOV.UK"]="/check-income-tax/assets/nuance/hmrc-uk-nuance.html",v3Lander.establishHostedFileURL(),window.location.href.indexOf("surveys/launchNativePostChatSurvey")>-1?v3Lander.isAtHostedFileURL=window.location.href.indexOf("hostedFileURL=true")>-1:v3Lander.isAtHostedFileURL=window.location.href.indexOf(v3Lander.hostedFileURL)>-1,v3Lander.assignDomain(),-1!=window.location.href.indexOf("?BLNK"));else if(-1!=window.location.href.indexOf("?CCFRM")){var host=(window.v3LanderConfig.vanityDomain||"https://hmrc-uk.digital.nuance.com").replace(/^https?:\/\//,""),url="http://"+window.document.domain+"/tagserver/ccform/getCreditCardForm?host="+host;window.location.replace(url)}else if(-1!=window.location.href.indexOf("?CCTKN=1")){var s=document.createElement("script"),params=v3Lander.encodeURLIfNotEncoded(window.location.href.replace(/^.*\?/,"?")),src=(window.v3LanderConfig.vanityDomain||"https://hmrc-uk.digital.nuance.com")+"/tagserver/cctoken/getToken"+params;s.src=src,document.head.appendChild(s)}else if(-1!=window.location.href.indexOf("?CCTKN=2")){var s=document.createElement("script"),params=v3Lander.encodeURLIfNotEncoded(window.location.href.replace(/^.*\?/,"?")),src=(window.v3LanderConfig.vanityDomain||"https://hmrc-uk.digital.nuance.com")+"/tagserver/cctokentest/getToken"+params;s.src=src,document.head.appendChild(s)}else if(-1!=window.location.href.indexOf("?C2C"))v3Lander.testReady();else if(-1!=window.location.href.indexOf("?INJECT"))v3Lander.injectIntoParent();else if(-1!=window.location.href.indexOf("?RSC2C"))v3Lander.resizeAnscestorIframe();else if(-1!=window.location.href.indexOf("?POST2SERVER")){var href=window.location.href;if(-1!=href.indexOf("&URL")){var query=window.location.search.replace(/&eq;/g,"="),qs=query.slice(1)&&query.slice(1).split("&");qs&&(window.v3LanderConfig.clientStaticUrl=decodeURI(qs[1].split("=")[1]))}v3Lander.insertPostToServerTag()}else window.name&&-1!=window.name.indexOf("||")&&v3Lander.isAtHostedFileURL?"?XFRM"==window.location.search&&(v3Lander.xframeToIjsf(),window.close()):window.v3LanderConfig.customLaunching||v3Lander.start();window===window.parent&&"undefined"!=typeof CEAPI_POST_CHAT_SURVEY_DATA&&null!=CEAPI_POST_CHAT_SURVEY_DATA&&v3Lander.showLoader()}